{"ast":null,"code":"\"use strict\";\n\nvar _ = require(\"./lodash\");\nvar intersectNode = require(\"./intersect/intersect-node\");\nvar util = require(\"./util\");\nvar d3 = require(\"./d3\");\nmodule.exports = createEdgePaths;\nfunction createEdgePaths(selection, g, arrows) {\n  var previousPaths = selection.selectAll(\"g.edgePath\").data(g.edges(), function (e) {\n    return util.edgeToId(e);\n  }).classed(\"update\", true);\n  var newPaths = enter(previousPaths, g);\n  exit(previousPaths, g);\n  var svgPaths = previousPaths.merge !== undefined ? previousPaths.merge(newPaths) : previousPaths;\n  util.applyTransition(svgPaths, g).style(\"opacity\", 1);\n\n  // Save DOM element in the path group, and set ID and class\n  svgPaths.each(function (e) {\n    var domEdge = d3.select(this);\n    var edge = g.edge(e);\n    edge.elem = this;\n    if (edge.id) {\n      domEdge.attr(\"id\", edge.id);\n    }\n    util.applyClass(domEdge, edge[\"class\"], (domEdge.classed(\"update\") ? \"update \" : \"\") + \"edgePath\");\n  });\n  svgPaths.selectAll(\"path.path\").each(function (e) {\n    var edge = g.edge(e);\n    edge.arrowheadId = _.uniqueId(\"arrowhead\");\n    var domEdge = d3.select(this).attr(\"marker-end\", function () {\n      return \"url(\" + makeFragmentRef(location.href, edge.arrowheadId) + \")\";\n    }).style(\"fill\", \"none\");\n    util.applyTransition(domEdge, g).attr(\"d\", function (e) {\n      return calcPoints(g, e);\n    });\n    util.applyStyle(domEdge, edge.style);\n  });\n  svgPaths.selectAll(\"defs *\").remove();\n  svgPaths.selectAll(\"defs\").each(function (e) {\n    var edge = g.edge(e);\n    var arrowhead = arrows[edge.arrowhead];\n    arrowhead(d3.select(this), edge.arrowheadId, edge, \"arrowhead\");\n  });\n  return svgPaths;\n}\nfunction makeFragmentRef(url, fragmentId) {\n  var baseUrl = url.split(\"#\")[0];\n  return baseUrl + \"#\" + fragmentId;\n}\nfunction calcPoints(g, e) {\n  var edge = g.edge(e);\n  var tail = g.node(e.v);\n  var head = g.node(e.w);\n  var points = edge.points.slice(1, edge.points.length - 1);\n  points.unshift(intersectNode(tail, points[0]));\n  points.push(intersectNode(head, points[points.length - 1]));\n  return createLine(edge, points);\n}\nfunction createLine(edge, points) {\n  var line = (d3.line || d3.svg.line)().x(function (d) {\n    return d.x;\n  }).y(function (d) {\n    return d.y;\n  });\n  (line.curve || line.interpolate)(edge.curve);\n  return line(points);\n}\nfunction getCoords(elem) {\n  var bbox = elem.getBBox();\n  var matrix = elem.ownerSVGElement.getScreenCTM().inverse().multiply(elem.getScreenCTM()).translate(bbox.width / 2, bbox.height / 2);\n  return {\n    x: matrix.e,\n    y: matrix.f\n  };\n}\nfunction enter(svgPaths, g) {\n  var svgPathsEnter = svgPaths.enter().append(\"g\").attr(\"class\", \"edgePath\").style(\"opacity\", 0);\n  svgPathsEnter.append(\"path\").attr(\"class\", \"path\").attr(\"d\", function (e) {\n    var edge = g.edge(e);\n    var sourceElem = g.node(e.v).elem;\n    var points = _.range(edge.points.length).map(function () {\n      return getCoords(sourceElem);\n    });\n    return createLine(edge, points);\n  });\n  svgPathsEnter.append(\"defs\");\n  return svgPathsEnter;\n}\nfunction exit(svgPaths, g) {\n  var svgPathExit = svgPaths.exit();\n  util.applyTransition(svgPathExit, g).style(\"opacity\", 0).remove();\n}","map":{"version":3,"names":["_","require","intersectNode","util","d3","module","exports","createEdgePaths","selection","g","arrows","previousPaths","selectAll","data","edges","e","edgeToId","classed","newPaths","enter","exit","svgPaths","merge","undefined","applyTransition","style","each","domEdge","select","edge","elem","id","attr","applyClass","arrowheadId","uniqueId","makeFragmentRef","location","href","calcPoints","applyStyle","remove","arrowhead","url","fragmentId","baseUrl","split","tail","node","v","head","w","points","slice","length","unshift","push","createLine","line","svg","x","d","y","curve","interpolate","getCoords","bbox","getBBox","matrix","ownerSVGElement","getScreenCTM","inverse","multiply","translate","width","height","f","svgPathsEnter","append","sourceElem","range","map","svgPathExit"],"sources":["C:/Users/emmed/Documents/char_test/frontend/node_modules/dagre-d3/lib/create-edge-paths.js"],"sourcesContent":["\"use strict\";\n\nvar _ = require(\"./lodash\");\nvar intersectNode = require(\"./intersect/intersect-node\");\nvar util = require(\"./util\");\nvar d3 = require(\"./d3\");\nmodule.exports = createEdgePaths;\n\nfunction createEdgePaths(selection, g, arrows) {\n  var previousPaths = selection.selectAll(\"g.edgePath\")\n    .data(g.edges(), function(e) { return util.edgeToId(e); })\n    .classed(\"update\", true);\n\n  var newPaths = enter(previousPaths, g);\n  exit(previousPaths, g);\n\n  var svgPaths = previousPaths.merge !== undefined ? previousPaths.merge(newPaths) : previousPaths;\n  util.applyTransition(svgPaths, g)\n    .style(\"opacity\", 1);\n\n  // Save DOM element in the path group, and set ID and class\n  svgPaths.each(function(e) {\n    var domEdge = d3.select(this);\n    var edge = g.edge(e);\n    edge.elem = this;\n\n    if (edge.id) {\n      domEdge.attr(\"id\", edge.id);\n    }\n\n    util.applyClass(domEdge, edge[\"class\"],\n      (domEdge.classed(\"update\") ? \"update \" : \"\") + \"edgePath\");\n  });\n\n  svgPaths.selectAll(\"path.path\")\n    .each(function(e) {\n      var edge = g.edge(e);\n      edge.arrowheadId = _.uniqueId(\"arrowhead\");\n\n      var domEdge = d3.select(this)\n        .attr(\"marker-end\", function() {\n          return \"url(\" + makeFragmentRef(location.href, edge.arrowheadId) + \")\";\n        })\n        .style(\"fill\", \"none\");\n\n      util.applyTransition(domEdge, g)\n        .attr(\"d\", function(e) { return calcPoints(g, e); });\n\n      util.applyStyle(domEdge, edge.style);\n    });\n\n  svgPaths.selectAll(\"defs *\").remove();\n  svgPaths.selectAll(\"defs\")\n    .each(function(e) {\n      var edge = g.edge(e);\n      var arrowhead = arrows[edge.arrowhead];\n      arrowhead(d3.select(this), edge.arrowheadId, edge, \"arrowhead\");\n    });\n\n  return svgPaths;\n}\n\nfunction makeFragmentRef(url, fragmentId) {\n  var baseUrl = url.split(\"#\")[0];\n  return baseUrl + \"#\" + fragmentId;\n}\n\nfunction calcPoints(g, e) {\n  var edge = g.edge(e);\n  var tail = g.node(e.v);\n  var head = g.node(e.w);\n  var points = edge.points.slice(1, edge.points.length - 1);\n  points.unshift(intersectNode(tail, points[0]));\n  points.push(intersectNode(head, points[points.length - 1]));\n\n  return createLine(edge, points);\n}\n\nfunction createLine(edge, points) {\n  var line = (d3.line || d3.svg.line)()\n    .x(function(d) { return d.x; })\n    .y(function(d) { return d.y; });\n  \n  (line.curve || line.interpolate)(edge.curve);\n\n  return line(points);\n}\n\nfunction getCoords(elem) {\n  var bbox = elem.getBBox();\n  var matrix = elem.ownerSVGElement.getScreenCTM()\n    .inverse()\n    .multiply(elem.getScreenCTM())\n    .translate(bbox.width / 2, bbox.height / 2);\n  return { x: matrix.e, y: matrix.f };\n}\n\nfunction enter(svgPaths, g) {\n  var svgPathsEnter = svgPaths.enter().append(\"g\")\n    .attr(\"class\", \"edgePath\")\n    .style(\"opacity\", 0);\n  svgPathsEnter.append(\"path\")\n    .attr(\"class\", \"path\")\n    .attr(\"d\", function(e) {\n      var edge = g.edge(e);\n      var sourceElem = g.node(e.v).elem;\n      var points = _.range(edge.points.length).map(function() { return getCoords(sourceElem); });\n      return createLine(edge, points);\n    });\n  svgPathsEnter.append(\"defs\");\n  return svgPathsEnter;\n}\n\nfunction exit(svgPaths, g) {\n  var svgPathExit = svgPaths.exit();\n  util.applyTransition(svgPathExit, g)\n    .style(\"opacity\", 0)\n    .remove();\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,CAAC,GAAGC,OAAO,CAAC,UAAU,CAAC;AAC3B,IAAIC,aAAa,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AACzD,IAAIE,IAAI,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAC5B,IAAIG,EAAE,GAAGH,OAAO,CAAC,MAAM,CAAC;AACxBI,MAAM,CAACC,OAAO,GAAGC,eAAe;AAEhC,SAASA,eAAeA,CAACC,SAAS,EAAEC,CAAC,EAAEC,MAAM,EAAE;EAC7C,IAAIC,aAAa,GAAGH,SAAS,CAACI,SAAS,CAAC,YAAY,CAAC,CAClDC,IAAI,CAACJ,CAAC,CAACK,KAAK,CAAC,CAAC,EAAE,UAASC,CAAC,EAAE;IAAE,OAAOZ,IAAI,CAACa,QAAQ,CAACD,CAAC,CAAC;EAAE,CAAC,CAAC,CACzDE,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC;EAE1B,IAAIC,QAAQ,GAAGC,KAAK,CAACR,aAAa,EAAEF,CAAC,CAAC;EACtCW,IAAI,CAACT,aAAa,EAAEF,CAAC,CAAC;EAEtB,IAAIY,QAAQ,GAAGV,aAAa,CAACW,KAAK,KAAKC,SAAS,GAAGZ,aAAa,CAACW,KAAK,CAACJ,QAAQ,CAAC,GAAGP,aAAa;EAChGR,IAAI,CAACqB,eAAe,CAACH,QAAQ,EAAEZ,CAAC,CAAC,CAC9BgB,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;;EAEtB;EACAJ,QAAQ,CAACK,IAAI,CAAC,UAASX,CAAC,EAAE;IACxB,IAAIY,OAAO,GAAGvB,EAAE,CAACwB,MAAM,CAAC,IAAI,CAAC;IAC7B,IAAIC,IAAI,GAAGpB,CAAC,CAACoB,IAAI,CAACd,CAAC,CAAC;IACpBc,IAAI,CAACC,IAAI,GAAG,IAAI;IAEhB,IAAID,IAAI,CAACE,EAAE,EAAE;MACXJ,OAAO,CAACK,IAAI,CAAC,IAAI,EAAEH,IAAI,CAACE,EAAE,CAAC;IAC7B;IAEA5B,IAAI,CAAC8B,UAAU,CAACN,OAAO,EAAEE,IAAI,CAAC,OAAO,CAAC,EACpC,CAACF,OAAO,CAACV,OAAO,CAAC,QAAQ,CAAC,GAAG,SAAS,GAAG,EAAE,IAAI,UAAU,CAAC;EAC9D,CAAC,CAAC;EAEFI,QAAQ,CAACT,SAAS,CAAC,WAAW,CAAC,CAC5Bc,IAAI,CAAC,UAASX,CAAC,EAAE;IAChB,IAAIc,IAAI,GAAGpB,CAAC,CAACoB,IAAI,CAACd,CAAC,CAAC;IACpBc,IAAI,CAACK,WAAW,GAAGlC,CAAC,CAACmC,QAAQ,CAAC,WAAW,CAAC;IAE1C,IAAIR,OAAO,GAAGvB,EAAE,CAACwB,MAAM,CAAC,IAAI,CAAC,CAC1BI,IAAI,CAAC,YAAY,EAAE,YAAW;MAC7B,OAAO,MAAM,GAAGI,eAAe,CAACC,QAAQ,CAACC,IAAI,EAAET,IAAI,CAACK,WAAW,CAAC,GAAG,GAAG;IACxE,CAAC,CAAC,CACDT,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC;IAExBtB,IAAI,CAACqB,eAAe,CAACG,OAAO,EAAElB,CAAC,CAAC,CAC7BuB,IAAI,CAAC,GAAG,EAAE,UAASjB,CAAC,EAAE;MAAE,OAAOwB,UAAU,CAAC9B,CAAC,EAAEM,CAAC,CAAC;IAAE,CAAC,CAAC;IAEtDZ,IAAI,CAACqC,UAAU,CAACb,OAAO,EAAEE,IAAI,CAACJ,KAAK,CAAC;EACtC,CAAC,CAAC;EAEJJ,QAAQ,CAACT,SAAS,CAAC,QAAQ,CAAC,CAAC6B,MAAM,CAAC,CAAC;EACrCpB,QAAQ,CAACT,SAAS,CAAC,MAAM,CAAC,CACvBc,IAAI,CAAC,UAASX,CAAC,EAAE;IAChB,IAAIc,IAAI,GAAGpB,CAAC,CAACoB,IAAI,CAACd,CAAC,CAAC;IACpB,IAAI2B,SAAS,GAAGhC,MAAM,CAACmB,IAAI,CAACa,SAAS,CAAC;IACtCA,SAAS,CAACtC,EAAE,CAACwB,MAAM,CAAC,IAAI,CAAC,EAAEC,IAAI,CAACK,WAAW,EAAEL,IAAI,EAAE,WAAW,CAAC;EACjE,CAAC,CAAC;EAEJ,OAAOR,QAAQ;AACjB;AAEA,SAASe,eAAeA,CAACO,GAAG,EAAEC,UAAU,EAAE;EACxC,IAAIC,OAAO,GAAGF,GAAG,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC/B,OAAOD,OAAO,GAAG,GAAG,GAAGD,UAAU;AACnC;AAEA,SAASL,UAAUA,CAAC9B,CAAC,EAAEM,CAAC,EAAE;EACxB,IAAIc,IAAI,GAAGpB,CAAC,CAACoB,IAAI,CAACd,CAAC,CAAC;EACpB,IAAIgC,IAAI,GAAGtC,CAAC,CAACuC,IAAI,CAACjC,CAAC,CAACkC,CAAC,CAAC;EACtB,IAAIC,IAAI,GAAGzC,CAAC,CAACuC,IAAI,CAACjC,CAAC,CAACoC,CAAC,CAAC;EACtB,IAAIC,MAAM,GAAGvB,IAAI,CAACuB,MAAM,CAACC,KAAK,CAAC,CAAC,EAAExB,IAAI,CAACuB,MAAM,CAACE,MAAM,GAAG,CAAC,CAAC;EACzDF,MAAM,CAACG,OAAO,CAACrD,aAAa,CAAC6C,IAAI,EAAEK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;EAC9CA,MAAM,CAACI,IAAI,CAACtD,aAAa,CAACgD,IAAI,EAAEE,MAAM,CAACA,MAAM,CAACE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;EAE3D,OAAOG,UAAU,CAAC5B,IAAI,EAAEuB,MAAM,CAAC;AACjC;AAEA,SAASK,UAAUA,CAAC5B,IAAI,EAAEuB,MAAM,EAAE;EAChC,IAAIM,IAAI,GAAG,CAACtD,EAAE,CAACsD,IAAI,IAAItD,EAAE,CAACuD,GAAG,CAACD,IAAI,EAAE,CAAC,CAClCE,CAAC,CAAC,UAASC,CAAC,EAAE;IAAE,OAAOA,CAAC,CAACD,CAAC;EAAE,CAAC,CAAC,CAC9BE,CAAC,CAAC,UAASD,CAAC,EAAE;IAAE,OAAOA,CAAC,CAACC,CAAC;EAAE,CAAC,CAAC;EAEjC,CAACJ,IAAI,CAACK,KAAK,IAAIL,IAAI,CAACM,WAAW,EAAEnC,IAAI,CAACkC,KAAK,CAAC;EAE5C,OAAOL,IAAI,CAACN,MAAM,CAAC;AACrB;AAEA,SAASa,SAASA,CAACnC,IAAI,EAAE;EACvB,IAAIoC,IAAI,GAAGpC,IAAI,CAACqC,OAAO,CAAC,CAAC;EACzB,IAAIC,MAAM,GAAGtC,IAAI,CAACuC,eAAe,CAACC,YAAY,CAAC,CAAC,CAC7CC,OAAO,CAAC,CAAC,CACTC,QAAQ,CAAC1C,IAAI,CAACwC,YAAY,CAAC,CAAC,CAAC,CAC7BG,SAAS,CAACP,IAAI,CAACQ,KAAK,GAAG,CAAC,EAAER,IAAI,CAACS,MAAM,GAAG,CAAC,CAAC;EAC7C,OAAO;IAAEf,CAAC,EAAEQ,MAAM,CAACrD,CAAC;IAAE+C,CAAC,EAAEM,MAAM,CAACQ;EAAE,CAAC;AACrC;AAEA,SAASzD,KAAKA,CAACE,QAAQ,EAAEZ,CAAC,EAAE;EAC1B,IAAIoE,aAAa,GAAGxD,QAAQ,CAACF,KAAK,CAAC,CAAC,CAAC2D,MAAM,CAAC,GAAG,CAAC,CAC7C9C,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CACzBP,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;EACtBoD,aAAa,CAACC,MAAM,CAAC,MAAM,CAAC,CACzB9C,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrBA,IAAI,CAAC,GAAG,EAAE,UAASjB,CAAC,EAAE;IACrB,IAAIc,IAAI,GAAGpB,CAAC,CAACoB,IAAI,CAACd,CAAC,CAAC;IACpB,IAAIgE,UAAU,GAAGtE,CAAC,CAACuC,IAAI,CAACjC,CAAC,CAACkC,CAAC,CAAC,CAACnB,IAAI;IACjC,IAAIsB,MAAM,GAAGpD,CAAC,CAACgF,KAAK,CAACnD,IAAI,CAACuB,MAAM,CAACE,MAAM,CAAC,CAAC2B,GAAG,CAAC,YAAW;MAAE,OAAOhB,SAAS,CAACc,UAAU,CAAC;IAAE,CAAC,CAAC;IAC1F,OAAOtB,UAAU,CAAC5B,IAAI,EAAEuB,MAAM,CAAC;EACjC,CAAC,CAAC;EACJyB,aAAa,CAACC,MAAM,CAAC,MAAM,CAAC;EAC5B,OAAOD,aAAa;AACtB;AAEA,SAASzD,IAAIA,CAACC,QAAQ,EAAEZ,CAAC,EAAE;EACzB,IAAIyE,WAAW,GAAG7D,QAAQ,CAACD,IAAI,CAAC,CAAC;EACjCjB,IAAI,CAACqB,eAAe,CAAC0D,WAAW,EAAEzE,CAAC,CAAC,CACjCgB,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CACnBgB,MAAM,CAAC,CAAC;AACb","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}