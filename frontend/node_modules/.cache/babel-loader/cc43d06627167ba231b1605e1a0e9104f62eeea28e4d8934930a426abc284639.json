{"ast":null,"code":"\"use strict\";\n\nvar _ = require(\"./lodash\");\nvar addLabel = require(\"./label/add-label\");\nvar util = require(\"./util\");\nvar d3 = require(\"./d3\");\nmodule.exports = createNodes;\nfunction createNodes(selection, g, shapes) {\n  var simpleNodes = g.nodes().filter(function (v) {\n    return !util.isSubgraph(g, v);\n  });\n  var svgNodes = selection.selectAll(\"g.node\").data(simpleNodes, function (v) {\n    return v;\n  }).classed(\"update\", true);\n  svgNodes.exit().remove();\n  svgNodes.enter().append(\"g\").attr(\"class\", \"node\").style(\"opacity\", 0);\n  svgNodes = selection.selectAll(\"g.node\");\n  svgNodes.each(function (v) {\n    var node = g.node(v);\n    var thisGroup = d3.select(this);\n    util.applyClass(thisGroup, node[\"class\"], (thisGroup.classed(\"update\") ? \"update \" : \"\") + \"node\");\n    thisGroup.select(\"g.label\").remove();\n    var labelGroup = thisGroup.append(\"g\").attr(\"class\", \"label\");\n    var labelDom = addLabel(labelGroup, node);\n    var shape = shapes[node.shape];\n    var bbox = _.pick(labelDom.node().getBBox(), \"width\", \"height\");\n    node.elem = this;\n    if (node.id) {\n      thisGroup.attr(\"id\", node.id);\n    }\n    if (node.labelId) {\n      labelGroup.attr(\"id\", node.labelId);\n    }\n    if (_.has(node, \"width\")) {\n      bbox.width = node.width;\n    }\n    if (_.has(node, \"height\")) {\n      bbox.height = node.height;\n    }\n    bbox.width += node.paddingLeft + node.paddingRight;\n    bbox.height += node.paddingTop + node.paddingBottom;\n    labelGroup.attr(\"transform\", \"translate(\" + (node.paddingLeft - node.paddingRight) / 2 + \",\" + (node.paddingTop - node.paddingBottom) / 2 + \")\");\n    var root = d3.select(this);\n    root.select(\".label-container\").remove();\n    var shapeSvg = shape(root, bbox, node).classed(\"label-container\", true);\n    util.applyStyle(shapeSvg, node.style);\n    var shapeBBox = shapeSvg.node().getBBox();\n    node.width = shapeBBox.width;\n    node.height = shapeBBox.height;\n  });\n  var exitSelection;\n  if (svgNodes.exit) {\n    exitSelection = svgNodes.exit();\n  } else {\n    exitSelection = svgNodes.selectAll(null); // empty selection\n  }\n  util.applyTransition(exitSelection, g).style(\"opacity\", 0).remove();\n  return svgNodes;\n}","map":{"version":3,"names":["_","require","addLabel","util","d3","module","exports","createNodes","selection","g","shapes","simpleNodes","nodes","filter","v","isSubgraph","svgNodes","selectAll","data","classed","exit","remove","enter","append","attr","style","each","node","thisGroup","select","applyClass","labelGroup","labelDom","shape","bbox","pick","getBBox","elem","id","labelId","has","width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","root","shapeSvg","applyStyle","shapeBBox","exitSelection","applyTransition"],"sources":["C:/Users/emmed/Documents/char_test/frontend/node_modules/dagre-d3/lib/create-nodes.js"],"sourcesContent":["\"use strict\";\n\nvar _ = require(\"./lodash\");\nvar addLabel = require(\"./label/add-label\");\nvar util = require(\"./util\");\nvar d3 = require(\"./d3\");\n\nmodule.exports = createNodes;\n\nfunction createNodes(selection, g, shapes) {\n  var simpleNodes = g.nodes().filter(function(v) { return !util.isSubgraph(g, v); });\n  var svgNodes = selection.selectAll(\"g.node\")\n    .data(simpleNodes, function(v) { return v; })\n    .classed(\"update\", true);\n\n  svgNodes.exit().remove();\n\n  svgNodes.enter().append(\"g\")\n    .attr(\"class\", \"node\")\n    .style(\"opacity\", 0);\n\n  svgNodes = selection.selectAll(\"g.node\"); \n\n  svgNodes.each(function(v) {\n    var node = g.node(v);\n    var thisGroup = d3.select(this);\n    util.applyClass(thisGroup, node[\"class\"],\n      (thisGroup.classed(\"update\") ? \"update \" : \"\") + \"node\");\n\n    thisGroup.select(\"g.label\").remove();\n    var labelGroup = thisGroup.append(\"g\").attr(\"class\", \"label\");\n    var labelDom = addLabel(labelGroup, node);\n    var shape = shapes[node.shape];\n    var bbox = _.pick(labelDom.node().getBBox(), \"width\", \"height\");\n\n    node.elem = this;\n\n    if (node.id) { thisGroup.attr(\"id\", node.id); }\n    if (node.labelId) { labelGroup.attr(\"id\", node.labelId); }\n\n    if (_.has(node, \"width\")) { bbox.width = node.width; }\n    if (_.has(node, \"height\")) { bbox.height = node.height; }\n\n    bbox.width += node.paddingLeft + node.paddingRight;\n    bbox.height += node.paddingTop + node.paddingBottom;\n    labelGroup.attr(\"transform\", \"translate(\" +\n      ((node.paddingLeft - node.paddingRight) / 2) + \",\" +\n      ((node.paddingTop - node.paddingBottom) / 2) + \")\");\n\n    var root = d3.select(this);\n    root.select(\".label-container\").remove();\n    var shapeSvg = shape(root, bbox, node).classed(\"label-container\", true);\n    util.applyStyle(shapeSvg, node.style);\n\n    var shapeBBox = shapeSvg.node().getBBox();\n    node.width = shapeBBox.width;\n    node.height = shapeBBox.height;\n  });\n\n  var exitSelection;\n\n  if (svgNodes.exit) {\n    exitSelection = svgNodes.exit();\n  } else {\n    exitSelection = svgNodes.selectAll(null); // empty selection\n  }\n\n  util.applyTransition(exitSelection, g)\n    .style(\"opacity\", 0)\n    .remove();\n\n  return svgNodes;\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,CAAC,GAAGC,OAAO,CAAC,UAAU,CAAC;AAC3B,IAAIC,QAAQ,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AAC3C,IAAIE,IAAI,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAC5B,IAAIG,EAAE,GAAGH,OAAO,CAAC,MAAM,CAAC;AAExBI,MAAM,CAACC,OAAO,GAAGC,WAAW;AAE5B,SAASA,WAAWA,CAACC,SAAS,EAAEC,CAAC,EAAEC,MAAM,EAAE;EACzC,IAAIC,WAAW,GAAGF,CAAC,CAACG,KAAK,CAAC,CAAC,CAACC,MAAM,CAAC,UAASC,CAAC,EAAE;IAAE,OAAO,CAACX,IAAI,CAACY,UAAU,CAACN,CAAC,EAAEK,CAAC,CAAC;EAAE,CAAC,CAAC;EAClF,IAAIE,QAAQ,GAAGR,SAAS,CAACS,SAAS,CAAC,QAAQ,CAAC,CACzCC,IAAI,CAACP,WAAW,EAAE,UAASG,CAAC,EAAE;IAAE,OAAOA,CAAC;EAAE,CAAC,CAAC,CAC5CK,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC;EAE1BH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC;EAExBL,QAAQ,CAACM,KAAK,CAAC,CAAC,CAACC,MAAM,CAAC,GAAG,CAAC,CACzBC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrBC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;EAEtBT,QAAQ,GAAGR,SAAS,CAACS,SAAS,CAAC,QAAQ,CAAC;EAExCD,QAAQ,CAACU,IAAI,CAAC,UAASZ,CAAC,EAAE;IACxB,IAAIa,IAAI,GAAGlB,CAAC,CAACkB,IAAI,CAACb,CAAC,CAAC;IACpB,IAAIc,SAAS,GAAGxB,EAAE,CAACyB,MAAM,CAAC,IAAI,CAAC;IAC/B1B,IAAI,CAAC2B,UAAU,CAACF,SAAS,EAAED,IAAI,CAAC,OAAO,CAAC,EACtC,CAACC,SAAS,CAACT,OAAO,CAAC,QAAQ,CAAC,GAAG,SAAS,GAAG,EAAE,IAAI,MAAM,CAAC;IAE1DS,SAAS,CAACC,MAAM,CAAC,SAAS,CAAC,CAACR,MAAM,CAAC,CAAC;IACpC,IAAIU,UAAU,GAAGH,SAAS,CAACL,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC;IAC7D,IAAIQ,QAAQ,GAAG9B,QAAQ,CAAC6B,UAAU,EAAEJ,IAAI,CAAC;IACzC,IAAIM,KAAK,GAAGvB,MAAM,CAACiB,IAAI,CAACM,KAAK,CAAC;IAC9B,IAAIC,IAAI,GAAGlC,CAAC,CAACmC,IAAI,CAACH,QAAQ,CAACL,IAAI,CAAC,CAAC,CAACS,OAAO,CAAC,CAAC,EAAE,OAAO,EAAE,QAAQ,CAAC;IAE/DT,IAAI,CAACU,IAAI,GAAG,IAAI;IAEhB,IAAIV,IAAI,CAACW,EAAE,EAAE;MAAEV,SAAS,CAACJ,IAAI,CAAC,IAAI,EAAEG,IAAI,CAACW,EAAE,CAAC;IAAE;IAC9C,IAAIX,IAAI,CAACY,OAAO,EAAE;MAAER,UAAU,CAACP,IAAI,CAAC,IAAI,EAAEG,IAAI,CAACY,OAAO,CAAC;IAAE;IAEzD,IAAIvC,CAAC,CAACwC,GAAG,CAACb,IAAI,EAAE,OAAO,CAAC,EAAE;MAAEO,IAAI,CAACO,KAAK,GAAGd,IAAI,CAACc,KAAK;IAAE;IACrD,IAAIzC,CAAC,CAACwC,GAAG,CAACb,IAAI,EAAE,QAAQ,CAAC,EAAE;MAAEO,IAAI,CAACQ,MAAM,GAAGf,IAAI,CAACe,MAAM;IAAE;IAExDR,IAAI,CAACO,KAAK,IAAId,IAAI,CAACgB,WAAW,GAAGhB,IAAI,CAACiB,YAAY;IAClDV,IAAI,CAACQ,MAAM,IAAIf,IAAI,CAACkB,UAAU,GAAGlB,IAAI,CAACmB,aAAa;IACnDf,UAAU,CAACP,IAAI,CAAC,WAAW,EAAE,YAAY,GACtC,CAACG,IAAI,CAACgB,WAAW,GAAGhB,IAAI,CAACiB,YAAY,IAAI,CAAE,GAAG,GAAG,GACjD,CAACjB,IAAI,CAACkB,UAAU,GAAGlB,IAAI,CAACmB,aAAa,IAAI,CAAE,GAAG,GAAG,CAAC;IAErD,IAAIC,IAAI,GAAG3C,EAAE,CAACyB,MAAM,CAAC,IAAI,CAAC;IAC1BkB,IAAI,CAAClB,MAAM,CAAC,kBAAkB,CAAC,CAACR,MAAM,CAAC,CAAC;IACxC,IAAI2B,QAAQ,GAAGf,KAAK,CAACc,IAAI,EAAEb,IAAI,EAAEP,IAAI,CAAC,CAACR,OAAO,CAAC,iBAAiB,EAAE,IAAI,CAAC;IACvEhB,IAAI,CAAC8C,UAAU,CAACD,QAAQ,EAAErB,IAAI,CAACF,KAAK,CAAC;IAErC,IAAIyB,SAAS,GAAGF,QAAQ,CAACrB,IAAI,CAAC,CAAC,CAACS,OAAO,CAAC,CAAC;IACzCT,IAAI,CAACc,KAAK,GAAGS,SAAS,CAACT,KAAK;IAC5Bd,IAAI,CAACe,MAAM,GAAGQ,SAAS,CAACR,MAAM;EAChC,CAAC,CAAC;EAEF,IAAIS,aAAa;EAEjB,IAAInC,QAAQ,CAACI,IAAI,EAAE;IACjB+B,aAAa,GAAGnC,QAAQ,CAACI,IAAI,CAAC,CAAC;EACjC,CAAC,MAAM;IACL+B,aAAa,GAAGnC,QAAQ,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;EAC5C;EAEAd,IAAI,CAACiD,eAAe,CAACD,aAAa,EAAE1C,CAAC,CAAC,CACnCgB,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CACnBJ,MAAM,CAAC,CAAC;EAEX,OAAOL,QAAQ;AACjB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}